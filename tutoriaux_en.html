<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="site/css/bootstrap.min_v2.css" />
    
 
    <title>MkFramework</title>
 <link rel="stylesheet" type="text/css" href="site/css/main.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="site/css/jumbotron.css" media="screen" />


  
<script src="site/js/main.js" type="text/javascript"></script>

<link rel="alternate" type="application/rss+xml" title="RSS" href="news.rss"/>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34332613-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<style>
.container2{
margin-top:40px;

}
</style>
</head>
<body>

<style>
.navbar .navbar-brand{
background: url('site/css/images//logoMk.png') no-repeat 0px 0px ;
padding-left:60px;
}
</style>

<nav class="navbar navbar-expand-md fixed-top navbar-dark bg-dark">
	<a class="navbar-brand" href="#">MKFramework</a>
	<button class="navbar-toggler p-0 border-0" type="button" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="navbar-toggler-icon"></span>
	</button>
	
 

	<div class="navbar-collapse collapse"  >
		<ul class="navbar-nav mr-auto">
		
			
							
				<li class="nav-item ">
					<a  class="nav-link" href="accueil_en.html">Home <span class="sr-only">(current)</span></a>
				</li>
			
				
				
			
							
				<li class="nav-item ">
					<a  class="nav-link" href="news_en.html">The website <span class="sr-only">(current)</span></a>
				</li>
			
				
				
			
							
				<li class="nav-item ">
					<a  class="nav-link" href="fonctionnement_en.html">Presentation <span class="sr-only">(current)</span></a>
				</li>
			
				
				
			
							
				<li class="nav-item active">
					<a  class="nav-link" href="start_en.html">Documentation <span class="sr-only">(current)</span></a>
				</li>
			
				
				
			
							
				<li class="nav-item ">
					<a  class="nav-link" href="publishonweb_en.html">Publications <span class="sr-only">(current)</span></a>
				</li>
			
				
				
			
							
				<li class="nav-item ">
					<a  class="nav-link" href="telecharger_en.html">Download <span class="sr-only">(current)</span></a>
				</li>
			
				
				
			
							
				<li class="nav-item ">
					<a target="_blank" class="nav-link" href="http://www.developpez.net/forums/f1355/applications/projets/projets-heberges/mkframework/">Forum <span class="sr-only">(current)</span></a>
				</li>
			
				
				
						
			
          
		</ul>
		
		<ul class="navbar-nav  navbar-right">
						<li class="nav-item"><a class="nav-link"  href="tutoriaux.html">FR</a></li>

			<li><a class="nav-link" style="font-weight:bold" href="tutoriaux_en.html">EN</a></li>
		</ul>
		
	</div>
</nav>
 <style>
 .navbar-custom {
    background-color: #124c5c;
}</style>
<nav class="navbar navbar-expand-md  navbar-custom navbar-dark">
	 

	<div class="navbar-collapse collapse"  >
		<ul class="navbar-nav mr-auto">
	
			
	
				
			
			<li class="nav-item ">
				<a class="nav-link" href="start_en.html" >Start <span class="sr-only">(current)</span></a>
			</li>
		
			
			
				
			
			<li class="nav-item active">
				<a class="nav-link" href="#" >Tutorials <span class="sr-only">(current)</span></a>
			</li>
		
			
			
				
			
			<li class="nav-item ">
				<a class="nav-link" href="bigtutoriaux_en.html" >Big Tutorials <span class="sr-only">(current)</span></a>
			</li>
		
			
			
				
					
			
			<li class="nav-item ">
				<a class="nav-link" href="otherscreencasts_en.html" >Screencasts <span class="sr-only">(current)</span></a>
			</li>
		
			
			
				
					
			
			<li class="nav-item ">
				<a class="nav-link" href="api_en.html" >API <span class="sr-only">(current)</span></a>
			</li>
		
			
			
				
			
			<li class="nav-item ">
				<a class="nav-link" href="faq_en.html" >FAQ <span class="sr-only">(current)</span></a>
			</li>
		
			
			
		  
  
         
	</ul>
</div>
</nav>


    
      <main role="main">
      
		<div class="container container2">
	 
		<h1>Tutoriaux (translate in progress)</h1><a href="#newsite">Create a new website </a><br /><a href="#model">Generate the abstract object layer class  </a><br /><a href="#crud">Create a CRUD module (Create Read Update Delete) </a><br /><a href="#menu">Generate a menu module for your website </a><br /><a href="#auth">Add an authenticate module on your page/module </a><br /><a href="#upload">Provide an upload features </a><br /><a href="#crudembedded">Create an embedded CRUD module (Create Read Update Delete) </a><br /><a href="#formulaire">Check the data before saving </a><br /><a href="#ajoutcheck">Create your own rule check </a><br /><a href="#formulaireplugin">Create a form more easily </a><br /><a href="#acl">Manage the permissions (ACL) </a><br /><a href="#usecrudembedded">Use embedded CRUD module </a><br /><a href="#zf1">Use Zend Framework 1.* class </a><br /><a href="#zf2">Use Zend Framework 2.* class</a><br /><a href="#zf3">Use Zend Framework 3.* class</a><br /><a href="#sf4">Use Symfony 4.* class</a><br /><a href="#token">Use token to protect you for xsrf  </a><br /><a href="faq_en.html">A question ? The FAQ is here </a><br /><br /><br /><p><a id="newsite" name="newsite"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Create a new website</h1><h2>Installation</h2>Download the mkframework by clic on the link in the download page. You get a zip archive.<br />Unpack it in you web directory (directory www/ htdocs/ or ever depends on your apache install)<br />In this tutorial, we think you have move the mkframework in the root directory, and you can access it by http://localhost/mkframework_v4_XX_YY (XX, YY depends on the version you download)<br /><br />For information the zip contains the web generator (builder) and the framework library<br />All website created links the builder mkframework library (you can copy/move it if you want, you have to configure the path in the conf/site.ini.php of your website)<br /><br /><h2>Use the builder to create your website</h2>Open you browser on http://localhost/mkframework_v4_XX_XX/<br />Clic on tab &quot;Cr&eacute;er un projet&quot;<br /><img src="data/img/builder_new.png" /><br />Fill the application name, for example &quot;blog&quot;<br /><img src="data/img/builder_new_blog.png" /><br />The checkbox input &quot;G&eacute;n&eacute;rer avec exemples&quot; indicate if the builder will create a website with some examples page<br />This examples pages make your learn more easy<br />Clic on button &quot;cr&eacute;er&quot;<br />The builder will create an empty website in Projects/blog<br /><img src="data/img/projet_tree.png" /><br /><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="model" name="model"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Generate the abstract object layer class</h1><h2>Create tables in your database</h2>For this example, we will use a mysql database<br />Execute this SQL query to create tables<br /><br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">article</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">titre</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">resume</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">text&nbsp;NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">auteur_id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br /><br /></span><span style="color: #0000BB">CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">auteur</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">nom</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">30</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">prenom</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">30</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br /><br /></span><span style="color: #0000BB">CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">comment</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">text</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">text&nbsp;NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">article_id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br /><br /><br />&lt;</span><span style="color: #0000BB">h2</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Configure&nbsp;the&nbsp;connection&nbsp;profile</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">h2</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">When&nbsp;you&nbsp;create&nbsp;a&nbsp;website</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">the&nbsp;builder&nbsp;create&nbsp;a&nbsp;directory&nbsp;hierarchy&nbsp;wich&nbsp;contains&nbsp;library</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">css</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">configure&nbsp;files</span><span style="color: #007700">...<br /></span><span style="color: #0000BB">The&nbsp;builder&nbsp;can&nbsp;read&nbsp;the&nbsp;configuration&nbsp;file</span><span style="color: #007700">.<br /></span><span style="color: #0000BB">The&nbsp;connection&nbsp;profil&nbsp;file&nbsp;contains&nbsp;multiple&nbsp;connection&nbsp;profil</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">it&nbsp;permit&nbsp;to&nbsp;configure&nbsp;the&nbsp;type&nbsp;of&nbsp;database</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">username</span><span style="color: #007700">/</span><span style="color: #0000BB">password</span><span style="color: #007700">...<br />If&nbsp;</span><span style="color: #0000BB">you&nbsp;want</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">you&nbsp;can&nbsp;</span><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">a&nbsp;xml</span><span style="color: #007700">/</span><span style="color: #0000BB">csv&nbsp;database&nbsp;</span><span style="color: #007700">for&nbsp;</span><span style="color: #0000BB">your&nbsp;users&nbsp;</span><span style="color: #007700">and&nbsp;</span><span style="color: #0000BB">mysql</span><span style="color: #007700">/</span><span style="color: #0000BB">postgresl&nbsp;</span><span style="color: #007700">for&nbsp;</span><span style="color: #0000BB">your&nbsp;articles</span><span style="color: #007700">...&nbsp;(</span><span style="color: #0000BB">each&nbsp;table&nbsp;should&nbsp;be&nbsp;hosted&nbsp;where&nbsp;you&nbsp;want&nbsp;easily</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">You&nbsp;can&nbsp;manage&nbsp;you&nbsp;configuration&nbsp;file&nbsp;conf</span><span style="color: #007700">/</span><span style="color: #0000BB">connexion</span><span style="color: #007700">.</span><span style="color: #0000BB">ini</span><span style="color: #007700">.</span><span style="color: #0000BB">php<br /><br /></span><span style="color: #007700">For&nbsp;</span><span style="color: #0000BB">example</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">our&nbsp;mysql&nbsp;database&nbsp;is&nbsp;hosted&nbsp;localy<br /><br />mysql</span><span style="color: #007700">.</span><span style="color: #0000BB">dsn</span><span style="color: #007700">=</span><span style="color: #DD0000">"mysql:dbname=blog;host=127.0.0.1"<br /></span><span style="color: #0000BB">mysql</span><span style="color: #007700">.</span><span style="color: #0000BB">sgbd</span><span style="color: #007700">=</span><span style="color: #0000BB">pdo_mysql<br />mysql</span><span style="color: #007700">.</span><span style="color: #0000BB">hostname</span><span style="color: #007700">=</span><span style="color: #0000BB">127.0.0.1<br />mysql</span><span style="color: #007700">.</span><span style="color: #0000BB">database</span><span style="color: #007700">=</span><span style="color: #0000BB">blog<br />mysql</span><span style="color: #007700">.</span><span style="color: #0000BB">username</span><span style="color: #007700">=</span><span style="color: #0000BB">root<br />mysql</span><span style="color: #007700">.</span><span style="color: #0000BB">password</span><span style="color: #007700">=</span><span style="color: #0000BB">pass<br />&nbsp;&nbsp;&nbsp;</span><br />
</span><br />
</code></div><br /><h2>Generate the abstract model layer class</h2>The framework is base on a MVC structure, you have to create the M: Model that provide you the database interaction<br />This is very simple with the builder, clic on the tab &quot;Administrer les projets&quot;, then clic on your poject &quot;blog&quot;<br /><img src="data/img/builder_blog_index.png" /><br />Clic on button &quot;Cr&eacute;er couche model&quot;<br /><img src="data/img/builder_blog_model.png" /><br /><br />Clic on the link of your configuration profil, there &quot;mysql&quot;<br />You can see the list of table in your database<br /><img src="data/img/builder_blog_model2.png" /><br />Clic on the button &quot;generer&quot; to generate the abstract model layer class<br /><img src="data/img/builder_blog_model2generated.png" /><br /><br />This is an example of the article model class generated:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">model_article&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_model</span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sClassRow</span><span style="color: #007700">=</span><span style="color: #DD0000">'row_article'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sTable</span><span style="color: #007700">=</span><span style="color: #DD0000">'article'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sConfig</span><span style="color: #007700">=</span><span style="color: #DD0000">'mysql'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$tId</span><span style="color: #007700">=array(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">_getInstance</span><span style="color: #007700">(</span><span style="color: #0000BB">__CLASS__</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">findById</span><span style="color: #007700">(</span><span style="color: #0000BB">$uId</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sTable</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;id=?'</span><span style="color: #007700">,</span><span style="color: #0000BB">$uId&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">findAll</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sTable</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">}<br /><br />class&nbsp;</span><span style="color: #0000BB">row_article&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_row</span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sClassModel</span><span style="color: #007700">=</span><span style="color: #DD0000">'model_article'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*exemple&nbsp;jointure<br />&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;findAuteur(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;model_auteur::getInstance()-&gt;findById($this-&gt;auteur_id);<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*exemple&nbsp;test&nbsp;validation*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_valid</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTab</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;renseigner&nbsp;vos&nbsp;check&nbsp;ici<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEqual('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isNotEqual('champ','valeurB','Le&nbsp;champ&nbsp;est&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isUpperThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;sup&amp;eacute;&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isUpperOrEqualThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;sup&amp;eacute;&nbsp;ou&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isLowerThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;inf&amp;eacute;rieur&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isLowerOrEqualThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;inf&amp;eacute;rieur&nbsp;ou&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEmpty('champ','Le&nbsp;champ&nbsp;n\'est&nbsp;pas&nbsp;vide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isNotEmpty('champ','Le&nbsp;champ&nbsp;ne&nbsp;doit&nbsp;pas&nbsp;&amp;ecirc;tre&nbsp;vide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEmailValid('champ','L\email&nbsp;est&nbsp;invalide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;matchExpression('champ','/[0-9]/','Le&nbsp;champ&nbsp;n\'est&nbsp;pas&nbsp;au&nbsp;bon&nbsp;format');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;notMatchExpression('champ','/[a-zA-Z]/','Le&nbsp;champ&nbsp;ne&nbsp;doit&nbsp;pas&nbsp;&amp;ecirc;tre&nbsp;a&nbsp;ce&nbsp;format');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$oPluginValid</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getListError</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getListError</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="crud" name="crud"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Create a CRUD module (Create Read Update Delete)</h1>Here you have generated the model layer class, configure the connexion profi and generated model class.<br />You can easily generate a module which will permit you to add an article, list, edit and delete one of them.<br />We call this the CRUD: Create Read Update Delete, this will be generated by the builder.<br />Clic on the link &quot;Cr&eacute;er un module CRUD&quot;<br /><img src="data/img/builder_blog_crud.png" /><br />Clic on the model class to use &quot;model_article&quot;<br /><img src="data/img/builder_blog_crud_article.png" /><br />You can see the field list of your table, with some input parameters to personalize the CRUD generation.<br />Clic on the button &quot;cr&eacute;er&quot;<br /><img src="data/img/builder_blog_crud_article2.png" /><br />The builder generate your CRUD module article:<br />In detail:<br />- Create: a link on the rows array, and a form to add a row<br />- Read: a page that contain a rows array which list rows in databas<br />- Update: a link and a form page to update a row<br />- Delete: a link and a form page to confirm deletion<br /><img src="data/img/projet_tree_article.png" /><br /><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="menu" name="menu"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Generate a menu module for your website</h1><h2>Introduction</h2>In your website, you want to create a menu module.<br />Il your module, for example article (file module/article/main.php)<br />Your file is like this code:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">module_article&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_module</span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">before</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_layout</span><span style="color: #007700">(</span><span style="color: #DD0000">'template1'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_index</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;considere&nbsp;que&nbsp;la&nbsp;page&nbsp;par&nbsp;defaut&nbsp;est&nbsp;la&nbsp;page&nbsp;de&nbsp;listage<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_list</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_list</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oArticleModel</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">model_article</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tArticle</span><span style="color: #007700">=</span><span style="color: #0000BB">$oArticleModel</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'article::list'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tArticle</span><span style="color: #007700">=</span><span style="color: #0000BB">$tArticle</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tColumn</span><span style="color: #007700">=</span><span style="color: #0000BB">$oArticleModel</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getListColumn</span><span style="color: #007700">();</span><span style="color: #FF8000">//array('id','titre');//<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">(...)<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br />The fact to add a menu is like add on your website layout a module on a specific place.<br /><br />The menu module (note: to embedded a module, it will return to you its view object)<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br /></span><span style="color: #007700">Class&nbsp;</span><span style="color: #0000BB">module_menu&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_module</span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_left</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//you&nbsp;link&nbsp;array&nbsp;wich&nbsp;contains&nbsp;as&nbsp;key&nbsp;the&nbsp;label,&nbsp;and&nbsp;as&nbsp;value&nbsp;the&nbsp;couple&nbsp;module/action<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tLink</span><span style="color: #007700">=array(<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Articles'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'article::list'</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Archives'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'article::archives'</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Prive'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'prive::list'</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//if&nbsp;you&nbsp;want&nbsp;to&nbsp;manage&nbsp;ACL&nbsp;(cf&nbsp;tutorial&nbsp;about&nbsp;ACL)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getACL</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">can</span><span style="color: #007700">(</span><span style="color: #DD0000">'edit'</span><span style="color: #007700">,</span><span style="color: #DD0000">'acl'</span><span style="color: #007700">)&nbsp;){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tLink</span><span style="color: #007700">[</span><span style="color: #DD0000">'Manage&nbsp;accounts'</span><span style="color: #007700">]=</span><span style="color: #DD0000">'account::list'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tLink</span><span style="color: #007700">[</span><span style="color: #DD0000">'Manage&nbsp;groups'</span><span style="color: #007700">]=</span><span style="color: #DD0000">'group::list'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tLink</span><span style="color: #007700">[</span><span style="color: #DD0000">'Manage&nbsp;permission'</span><span style="color: #007700">]=</span><span style="color: #DD0000">'permission::list'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'menu::index'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tLink</span><span style="color: #007700">=</span><span style="color: #0000BB">$tLink</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$oView</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br />Tye view menu (file module/menu/view/index.php)<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">ul</span><span style="color: #007700">&gt;<br />&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tLink&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$sLibelle&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$sLink</span><span style="color: #007700">):&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParamNav</span><span style="color: #007700">()==</span><span style="color: #0000BB">$sLink</span><span style="color: #007700">):</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&nbsp;class="selectionne"&gt;&lt;a&nbsp;href="<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLink</span><span style="color: #007700">(</span><span style="color: #0000BB">$sLink</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;</span>"&gt;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$sLibelle&nbsp;?&gt;</span>&lt;/a&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">else:</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;&lt;a&nbsp;href="<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLink</span><span style="color: #007700">(</span><span style="color: #0000BB">$sLink</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;</span>"&gt;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$sLibelle&nbsp;?&gt;</span>&lt;/a&gt;&lt;/li&gt;<br />&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">endif;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;<br /><span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">endforeach;</span><span style="color: #0000BB">?&gt;<br /></span>&lt;/ul&gt;<br />&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br />You have two solutions:<br /><h2>Solution 1: use the static method addModule(placeholder, couple module::action)</h2>For example to add the action left from the menu module on the placeholder &quot;navigation&quot;<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addModule</span><span style="color: #007700">(</span><span style="color: #DD0000">'navigation'</span><span style="color: #007700">,</span><span style="color: #DD0000">'menu::left'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>This call is to add if you want in the before() method of your module to add menu on every action of your module.<br />Or if you switch menu between every action, you can add different menu in each action<br /><br /><h2>Solution 2: the mkframework use view as object, so you can instanciate one and get it</h2>In your module<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$oModuleMenu</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">module_menu</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$oViewMenu</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$oModelMenu</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_left</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'navigation'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oViewMenu</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="auth" name="auth"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Add an authenticate module on your page/module</h1>Add an authenticate module means 4 things:<br />1. create a model class to manage connection account (with couple login/password)<br />2. create a module to mange the authentication<br />3. indicate in the configure file the couple module/action which will manage authentication (private access)<br />4. indicate pages (actions) where you need to be authenticate<br /><br /><h2>Etape 1: create a model class to manage connection accounts (with couple login/password)</h2>Create a model class for connection accounts, for example &quot;acccount&quot;<br />For this example, we save it in a mysql database<br />There will contains &quot;login&quot; and &quot;password&quot;<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">model_account&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_model</span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sClassRow</span><span style="color: #007700">=</span><span style="color: #DD0000">'row_account'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sTable</span><span style="color: #007700">=</span><span style="color: #DD0000">'account'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sConfig</span><span style="color: #007700">=</span><span style="color: #DD0000">'mysql'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$tId</span><span style="color: #007700">=array(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;static&nbsp;function&nbsp;</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">_getInstance</span><span style="color: #007700">(</span><span style="color: #0000BB">__CLASS__</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">findById</span><span style="color: #007700">(</span><span style="color: #0000BB">$uId</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sTable</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;id=?'</span><span style="color: #007700">,</span><span style="color: #0000BB">$uId&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">findAll</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sTable</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getListAccount</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tLoginPassAccount</span><span style="color: #007700">=array();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$tAccount</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$tAccount&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tLoginPassAccount</span><span style="color: #007700">[</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">login</span><span style="color: #007700">][</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pass</span><span style="color: #007700">]=</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$tLoginPassAccount</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">}<br /><br />class&nbsp;</span><span style="color: #0000BB">row_account&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_row</span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sClassModel</span><span style="color: #007700">=</span><span style="color: #DD0000">'model_account'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*exemple&nbsp;jointure<br />&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;findAuteur(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;model_auteur::getInstance()-&gt;findById($this-&gt;auteur_id);<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*exemple&nbsp;test&nbsp;validation*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_valid</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTab</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;renseigner&nbsp;vos&nbsp;check&nbsp;ici<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEqual('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isNotEqual('champ','valeurB','Le&nbsp;champ&nbsp;est&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isUpperThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;sup&amp;eacute;&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isUpperOrEqualThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;sup&amp;eacute;&nbsp;ou&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isLowerThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;inf&amp;eacute;rieur&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isLowerOrEqualThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;inf&amp;eacute;rieur&nbsp;ou&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEmpty('champ','Le&nbsp;champ&nbsp;n\'est&nbsp;pas&nbsp;vide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isNotEmpty('champ','Le&nbsp;champ&nbsp;ne&nbsp;doit&nbsp;pas&nbsp;&amp;ecirc;tre&nbsp;vide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEmailValid('champ','L\email&nbsp;est&nbsp;invalide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;matchExpression('champ','/[0-9]/','Le&nbsp;champ&nbsp;n\'est&nbsp;pas&nbsp;au&nbsp;bon&nbsp;format');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;notMatchExpression('champ','/[a-zA-Z]/','Le&nbsp;champ&nbsp;ne&nbsp;doit&nbsp;pas&nbsp;&amp;ecirc;tre&nbsp;a&nbsp;ce&nbsp;format');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$oPluginValid</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getListError</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getListError</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br /><h2>Etape 2: cr&eacute;er ce module qui gerera l&#039;authentification</h2>Appelons-le par exemple &quot;auth&quot;<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">module_auth&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_module</span><span style="color: #007700">{<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">before</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;active&nbsp;l'authentification<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">enable</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_layout</span><span style="color: #007700">(</span><span style="color: #DD0000">'template1'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_login</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'auth::login'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isPost</span><span style="color: #007700">()&nbsp;){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sLogin</span><span style="color: #007700">=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'login'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;stoque&nbsp;les&nbsp;mots&nbsp;de&nbsp;passe&nbsp;hash&nbsp;en&nbsp;sha1&nbsp;pour&nbsp;l'exemple<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sPass</span><span style="color: #007700">=</span><span style="color: #0000BB">sha1</span><span style="color: #007700">(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'password'</span><span style="color: #007700">))*;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">model_account</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getListAccount</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;va&nbsp;verifier&nbsp;que&nbsp;l'on&nbsp;trouve&nbsp;dans&nbsp;le&nbsp;tableau&nbsp;retourn&nbsp;par&nbsp;notre&nbsp;model&nbsp;"account"<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//l'entre&nbsp;$tAccount[&nbsp;login&nbsp;][&nbsp;mot&nbsp;de&nbsp;passe&nbsp;hash*&nbsp;]<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">checkLoginPass</span><span style="color: #007700">(</span><span style="color: #0000BB">$tAccount</span><span style="color: #007700">,</span><span style="color: #0000BB">$sLogin</span><span style="color: #007700">,</span><span style="color: #0000BB">$sPass</span><span style="color: #007700">)){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">redirect</span><span style="color: #007700">(</span><span style="color: #DD0000">'prive::list'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_logout</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">logout</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">after</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">show</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>* Pour des raisons de s&eacute;curit&eacute;, on ne stoque jamais un mot de passe en clair, on stoque son hash, et lors de l&#039;authentification, on hash de la m&ecirc;me mani&egrave;re le mot de passe envoy&eacute; pour verifi&eacute; si les deux hash sont identiques.<br /><br /><h2>Etape 3: indiquer dans le fichier de config ce couple module/action qui gerera l&#039;authentification</h2>Dans le fichier conf/site.ini.php de votre site<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">[</span><span style="color: #0000BB">auth</span><span style="color: #007700">]<br />;</span><span style="color: #0000BB">note&nbsp;</span><span style="color: #007700">:&nbsp;&gt;=&nbsp;</span><span style="color: #0000BB">php5.2&nbsp;dans&nbsp;le&nbsp;php</span><span style="color: #007700">.</span><span style="color: #0000BB">ini<br />session</span><span style="color: #007700">.</span><span style="color: #0000BB">cookie_httponly</span><span style="color: #007700">=</span><span style="color: #0000BB">1<br />session</span><span style="color: #007700">.</span><span style="color: #0000BB">use_cookies&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1<br />session</span><span style="color: #007700">.</span><span style="color: #0000BB">use_only_cookies&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1<br />session</span><span style="color: #007700">.</span><span style="color: #0000BB">cookie_secure</span><span style="color: #007700">=</span><span style="color: #0000BB">1<br />enabled</span><span style="color: #007700">=</span><span style="color: #0000BB">0<br /></span><span style="color: #007700">class=</span><span style="color: #0000BB">plugin_auth<br />module</span><span style="color: #007700">=</span><span style="color: #0000BB">auth</span><span style="color: #007700">::</span><span style="color: #0000BB">login<br />session</span><span style="color: #007700">.</span><span style="color: #0000BB">timeout</span><span style="color: #007700">.</span><span style="color: #0000BB">enabled</span><span style="color: #007700">=</span><span style="color: #0000BB">1<br />session</span><span style="color: #007700">.</span><span style="color: #0000BB">timeout</span><span style="color: #007700">.</span><span style="color: #0000BB">lifetime</span><span style="color: #007700">=</span><span style="color: #0000BB">180<br />&nbsp;&nbsp;&nbsp;</span><br />
</span><br />
</code></div>Ici il est important de configurer la ligne module<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />module</span><span style="color: #007700">=</span><span style="color: #0000BB">auth</span><span style="color: #007700">::</span><span style="color: #0000BB">login<br />&nbsp;&nbsp;&nbsp;</span><br />
</span><br />
</code></div><br />note: tout le module &quot;auth&quot; sera accessible<br /><br /><h2>Etape 4: indiquer les pages o&ugrave; l&#039;authentification est n&eacute;cessaire</h2>Il suffit d&#039;ajouter dans chaque methode &quot;before&quot; de module &agrave; restreindre<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">enable</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br />Donc soit vous indiquer que tout un module est restreint en mettant cette appel dans before<br />Soit vous copier cette ligne dans la methode before d&#039;une page particuli&egrave;re<br />Par exemple pour restreindre la page article::edit<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #FF8000">//methode&nbsp;appele&nbsp;avant&nbsp;la&nbsp;page&nbsp;"edit"<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">before_edit</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">enable</span><span style="color: #007700">();<br />}<br />public&nbsp;function&nbsp;</span><span style="color: #0000BB">_edit</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//votre&nbsp;page&nbsp;"edit"<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="upload" name="upload"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Permettre l&#039;upload d&#039;un fichier</h1><h2>Introduction</h2>Vous pouvez avoir besoin sur un site web par exemple de permettre &agrave; vos utilisateurs d&#039;uploader leur photo de profil.<br />Voici comment g&eacute;rer un upload.<br />Dans notre exemple, nous partons de l&#039;existence d&#039;une table &quot;account&quot; (dont la cl&eacute; primaire est &quot;id&quot;) contenant un champ &quot;profilPicture&quot; et d&#039;un module s&#039;appellant &quot;profil&quot;.<br /><br /><h2>Cot&eacute; vue</h2>Ecrivez votre formulaire, en prenant bien soin de pr&eacute;ciser l&#039;attribut &quot;enctype&quot; dans votre balise &quot;form&quot;.<br />Editer le fichier module/profil/view/uploadProfilPicture.pho<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">form&nbsp;action</span><span style="color: #007700">=</span><span style="color: #DD0000">""&nbsp;</span><span style="color: #0000BB">method</span><span style="color: #007700">=</span><span style="color: #DD0000">"POST"&nbsp;</span><span style="color: #0000BB">enctype</span><span style="color: #007700">=</span><span style="color: #DD0000">"multipart/form-data"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">Photo&nbsp;de&nbsp;profil&nbsp;</span><span style="color: #007700">:&nbsp;&lt;</span><span style="color: #0000BB">input&nbsp;type</span><span style="color: #007700">=</span><span style="color: #DD0000">"file"&nbsp;</span><span style="color: #0000BB">name</span><span style="color: #007700">=</span><span style="color: #DD0000">"profilPicture"&nbsp;</span><span style="color: #007700">/&gt;<br /><br />&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">profilPicture</span><span style="color: #007700">!=</span><span style="color: #DD0000">''</span><span style="color: #007700">):</span><span style="color: #0000BB">?&gt;<br /></span>&lt;img&nbsp;src="<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">profilPicture&nbsp;?&gt;</span>"&nbsp;/&gt;<br /><span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">endif;</span><span style="color: #0000BB">?&gt;<br /></span><br />&lt;input&nbsp;type="submit"&nbsp;value="Sauvegarder"/&gt;<br /><br />&lt;/form&gt;<br />&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br /><h2>Cot&eacute; controlleur</h2>Dans l&#039;action de cette page d&#039;upload, nous allons<br />d&#039;une part fare appel &agrave; la vue pr&eacute;cedemment cr&eacute;&eacute;e<br />et d&#039;autre part g&eacute;rer la reception, l&#039;upload puis l&#039;enregistrement du chemin de l&#039;image dans le champ &quot;profilPicture&quot;<br /><br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">module_private&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_module</span><span style="color: #007700">{<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">before</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">(...)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//recuperation&nbsp;de&nbsp;l'id&nbsp;du&nbsp;compte&nbsp;de&nbsp;l'utilisateur&nbsp;connect<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getAccount</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">id</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">(...)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_uploadProfilPicture</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">checkUpload</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">model_Account</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findById</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'profil::uploadProfilPicture'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;</span><span style="color: #0000BB">checkUpload</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isPost</span><span style="color: #007700">()&nbsp;){&nbsp;</span><span style="color: #FF8000">//si&nbsp;ce&nbsp;n'est&nbsp;pas&nbsp;une&nbsp;requete&nbsp;POST&nbsp;on&nbsp;ne&nbsp;soumet&nbsp;pas<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">model_Account</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findById</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">id&nbsp;</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sColumn</span><span style="color: #007700">=</span><span style="color: #DD0000">'profilPicture'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginUpload</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_upload</span><span style="color: #007700">(</span><span style="color: #0000BB">$sColumn</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$oPluginUpload</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">()){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sNewFileName</span><span style="color: #007700">=</span><span style="color: #DD0000">'data/upload/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$sColumn</span><span style="color: #007700">.</span><span style="color: #DD0000">'_'</span><span style="color: #007700">.</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Ymdhis'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginUpload</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveAs</span><span style="color: #007700">(</span><span style="color: #0000BB">$sNewFileName</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">profilPicture</span><span style="color: #007700">=</span><span style="color: #0000BB">$oPluginUpload</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getPath</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="crudembedded" name="crudembedded"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Cr&eacute;er un module CRUD int&eacute;grable (Create Read Update Delete)</h1>Cette partie permet de g&eacute;n&eacute;rer un module que vous pourrez int&eacute;grer dans un autre module.<br />Pour cela cliquez sur &quot;Cr&eacute;er un module CRUD int&eacute;grable&quot;<br /><img src="data/img/builder_blog_crudembedded.png" /><br />Cliquez ensuite sur la classe mod&egrave;le &agrave; utiliser: ici model_article<br /><img src="data/img/builder_blog_crudembedded_article.png" /><br />On voit sur cet &eacute;cran la liste des champs de notre table, avec une checkbox permettant de chosir ceux &agrave; afficher dans notre CRUD.<br />On clique sur le bouton &quot;cr&eacute;er&quot;<br /><img src="data/img/builder_blog_crudembedded_article2.png" /><br />Et voila le module crud int&eacute;grable de votre table article est g&eacute;n&eacute;r&eacute;<br />Au menu:<br />- Create: un lien plus une page contenant un formulaire d&#039;ajout<br />- Read: une page contenant un tableau listant les &eacute;l&eacute;ments de la table<br />- Update: un lien plus une page contenant un formulaire de modification<br />- Delete: un lien plus une page de confirmation de suppression<br /><img src="data/img/projet_tree_article.png" /><br />Il vous suffit de copier dans le fichier main.php de votre module principal les lignes suivantes<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #FF8000">//on&nbsp;instancie&nbsp;ce&nbsp;module&nbsp;integrable<br /></span><span style="color: #0000BB">$oModuleArticle</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">module_article</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//on&nbsp;recuere&nbsp;la&nbsp;vue&nbsp;de&nbsp;ce&nbsp;module<br /></span><span style="color: #0000BB">$oViewArticle</span><span style="color: #007700">=</span><span style="color: #0000BB">$oModuleArticle</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_index</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//on&nbsp;assigne&nbsp;cette&nbsp;vue&nbsp;a&nbsp;notre&nbsp;layout<br /></span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oViewArticle</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br />note: dans le cas de &quot;poup&eacute;es russes&quot; de modules, il vous faut assigner la vue retourn&eacute;e au module, qui devra l&#039;afficher<br />Ainsi pour un module A incluant un module B (int&eacute;grable) qui incluerait lui-m&ecirc;me un module C (int&eacute;grable)<br />Au niveau du module B<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$oViewB</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'monModuleB::notreVueB'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//on&nbsp;instancie&nbsp;le&nbsp;module&nbsp;integrable&nbsp;C<br /></span><span style="color: #0000BB">$oModuleC</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">module_monModuleC</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//on&nbsp;recuere&nbsp;la&nbsp;vue&nbsp;de&nbsp;ce&nbsp;module&nbsp;C<br /></span><span style="color: #0000BB">$oViewModuleC</span><span style="color: #007700">=</span><span style="color: #0000BB">$oModuleC</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_index</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//on&nbsp;assigne&nbsp;la&nbsp;vue&nbsp;C&nbsp;&nbsp;la&nbsp;vue&nbsp;B&nbsp;;)<br /></span><span style="color: #0000BB">$oViewB</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oViewModuleC</span><span style="color: #007700">=</span><span style="color: #0000BB">$oViewModuleC</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br />qu&#039;on affichera dans la vue B ;)<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oViewModuleC</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">show</span><span style="color: #007700">()</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="formulaire" name="formulaire"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>V&eacute;rifier les entr&eacute;es d&#039;un formulaire</h1><h2>Introduction</h2>La v&eacute;rification des entr&eacute;es de formulaire se passe cot&eacute; &quot;model&quot; elle passe par un retour d&#039;un tableau des erreurs trouv&eacute;es qui seront affich&eacute;es par la suite dans la vue.<br />Nous allons dans notre exemple ajouter des contr&ocirc;le sur une table client<br /><h2>Cot&eacute; model</h2>Cot&eacute; model, &eacute;diter votre classe row_client<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">row_client&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_row</span><span style="color: #007700">{<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$sClassModel</span><span style="color: #007700">=</span><span style="color: #DD0000">'model_client'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*exemple&nbsp;jointure<br />&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;findAuteur(){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;model_auteur::getInstance()-&gt;findById($this-&gt;auteur_id);<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*exemple&nbsp;test&nbsp;validation*/<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_valid</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTab</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;renseigner&nbsp;vos&nbsp;check&nbsp;ici<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEqual('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isNotEqual('champ','valeurB','Le&nbsp;champ&nbsp;est&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isUpperThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;sup&amp;eacute;&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isUpperOrEqualThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;sup&amp;eacute;&nbsp;ou&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isLowerThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;inf&amp;eacute;rieur&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isLowerOrEqualThan('champ','valeurB','Le&nbsp;champ&nbsp;n\est&nbsp;pas&nbsp;inf&amp;eacute;rieur&nbsp;ou&nbsp;&amp;eacute;gal&nbsp;&amp;agrave;&nbsp;'.$valeurB);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEmpty('champ','Le&nbsp;champ&nbsp;n\'est&nbsp;pas&nbsp;vide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isNotEmpty('champ','Le&nbsp;champ&nbsp;ne&nbsp;doit&nbsp;pas&nbsp;&amp;ecirc;tre&nbsp;vide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;isEmailValid('champ','L\email&nbsp;est&nbsp;invalide');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;matchExpression('champ','/[0-9]/','Le&nbsp;champ&nbsp;n\'est&nbsp;pas&nbsp;au&nbsp;bon&nbsp;format');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oPluginValid-&gt;notMatchExpression('champ','/[a-zA-Z]/','Le&nbsp;champ&nbsp;ne&nbsp;doit&nbsp;pas&nbsp;&amp;ecirc;tre&nbsp;a&nbsp;ce&nbsp;format');<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$oPluginValid</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getListError</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getListError</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Par d&eacute;fault, chaque classe &quot;model&quot; g&eacute;n&eacute;r&eacute; inclus ceci, vous devez ajouter les v&eacute;rifications au sein de la m&eacute;thode &quot;getCheck&quot;<br />Dans notre exemple, nous allons v&eacute;rifier que les noms et prenoms sont bien rempli et que l&#039;email est correct<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_valid</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTab</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isNotEmpty</span><span style="color: #007700">(</span><span style="color: #DD0000">'nom'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Ce&nbsp;champ&nbsp;doit&nbsp;&amp;ecirc;tre&nbsp;saisi'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isNotEmpty</span><span style="color: #007700">(</span><span style="color: #DD0000">'prenom'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Ce&nbsp;champ&nbsp;doit&nbsp;&amp;ecirc;tre&nbsp;saisi'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isNotEmpty</span><span style="color: #007700">(</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Ce&nbsp;champ&nbsp;doit&nbsp;&amp;ecirc;tre&nbsp;saisi'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isEmailValid</span><span style="color: #007700">(</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Cet&nbsp;email&nbsp;est&nbsp;invalide'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$oPluginValid</span><span style="color: #007700">;<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Toutes les methodes de verifications sont pr&eacute;sentes au sein de la classe plugin_check.php, n&#039;hesitez pas &agrave; en ajouter si il vous en manque ;)<br /><h2>Cot&eacute; controleur</h2>Lorsque vous soumettez un formulaire, vous pouvez verifier l&#039;arriv&eacute;e d&#039;une requ&ecirc;te &quot;post&quot; et choisir de la traiter<br />C&#039;est &agrave; ce moment la que l&#039;on va cr&eacute;er notre futur enregistrement &quot;client&quot;, l&#039;enrichir des informations fournies via le formulaire, pour enfin demander si cet enregistrement est valide avant de l&#039;enregistrer.<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_new</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$tMessage</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'client::new'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">=</span><span style="color: #0000BB">$tMessage</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br />}<br /><br />public&nbsp;function&nbsp;</span><span style="color: #0000BB">save</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isPost</span><span style="color: #007700">()&nbsp;){&nbsp;</span><span style="color: #FF8000">//si&nbsp;ce&nbsp;n'est&nbsp;pas&nbsp;une&nbsp;requete&nbsp;POST&nbsp;on&nbsp;ne&nbsp;soumet&nbsp;pas<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oClient</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">row_client</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$tFields</span><span style="color: #007700">=array(</span><span style="color: #DD0000">'nom'</span><span style="color: #007700">,</span><span style="color: #DD0000">'prenom'</span><span style="color: #007700">,</span><span style="color: #DD0000">'email'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$tFields&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$sField</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oClient</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$sField</span><span style="color: #007700">=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #0000BB">$sField</span><span style="color: #007700">,</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$oClient</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">()){<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oClient</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//une&nbsp;fois&nbsp;enregistre&nbsp;on&nbsp;redirige&nbsp;(vers&nbsp;la&nbsp;page&nbsp;d'edition)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">redirect</span><span style="color: #007700">(</span><span style="color: #DD0000">'client::list'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}else{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$oClient</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getListError</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Comme vous le voyez ici j&#039;ai scind&eacute; la partie enregistrement et la partie action, dans cette partie enregistrement, on v&eacute;rifie d&#039;abord que la requ&ecirc;te est bien &quot;post&quot;, puis on boucle sur les champs attendus.<br />Enfin on verifie que l&#039;enregistrement est &quot;valide&quot; (que les checks sont concluant), si ce n&#039;est pas le cas, on retourne &agrave; l&#039;action le tableau des messages d&#039;erreurs.<br />Ce tableau d&#039;erreur nous allons l&#039;assigner &agrave; notre vue pour indiquer &agrave; l&#039;utilisateur les champs en erreur.<br /><h2>Cot&eacute; vue</h2>Dans votre vue view/new.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">form&nbsp;action</span><span style="color: #007700">=</span><span style="color: #DD0000">""&nbsp;</span><span style="color: #0000BB">method</span><span style="color: #007700">=</span><span style="color: #DD0000">"POST"</span><span style="color: #007700">&gt;<br />&lt;</span><span style="color: #0000BB">table</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">tr</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">th</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Nom</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">th</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">td</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">input&nbsp;type</span><span style="color: #007700">=</span><span style="color: #DD0000">"text"&nbsp;</span><span style="color: #0000BB">name</span><span style="color: #007700">=</span><span style="color: #DD0000">"nom"</span><span style="color: #007700">/&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage&nbsp;</span><span style="color: #007700">and&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'nom'</span><span style="color: #007700">])):&nbsp;echo&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'nom'</span><span style="color: #007700">]);&nbsp;endif;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br />&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;Pr&amp;eacute;nom&lt;/th&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="text"&nbsp;name="prenom"/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage&nbsp;</span><span style="color: #007700">and&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'prenom'</span><span style="color: #007700">])):&nbsp;echo&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'prenom'</span><span style="color: #007700">]);&nbsp;endif;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br />&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;Email&lt;/th&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="text"&nbsp;name="prenom"/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage&nbsp;</span><span style="color: #007700">and&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">])):&nbsp;echo&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">]);&nbsp;endif;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br />&lt;/table&gt;<br />&lt;p&gt;&lt;input&nbsp;type="submit"&nbsp;value="Ajouter"&nbsp;/&gt;&lt;/p&gt;<br />&lt;/form&gt;<br />&nbsp;&nbsp;&nbsp;</span><br />
</code></div>Ici, sous chacun des champs, on verifie si il y a des messages sur un des champs de saisie.<br />note: attention: ce qui est retourn&eacute;e c&#039;est un &quot;tag&quot; et non un message &quot;ecrit&quot;, ca permet de choisir le message &agrave; afficher<br /><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="ajoutcheck" name="ajoutcheck"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Ajouter une verification particuli&egrave;re</h1><h2>Introduction</h2>Lorsque vous utilisez la verification cot&eacute; model, vous instanciez un objet issu de la classe plugin_valid, puis indiquez un ensemble de verification &agrave; faire.<br />Ce qui se passe c&#039;est une utilisation des methodes de la classe plugin_check.<br />Si vous souhaitez ajouter une verification particuli&egrave;re: par exemple verifier qu&#039;un volume est divisible par 25 pour nos commandes.<br /><h2>Ajouter une methode de verification dans la classe plugin_check</h2>Editez votre plugin plugin_check<br />Et ajoutez la methode suivante:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #FF8000">/**<br />*&nbsp;verifie&nbsp;si&nbsp;le&nbsp;$uValue&nbsp;est&nbsp;divisible&nbsp;par&nbsp;25<br />*&nbsp;@access&nbsp;public<br />*&nbsp;@param&nbsp;undefined&nbsp;$uValue&nbsp;valeur<br />*&nbsp;@return&nbsp;bool&nbsp;retourne&nbsp;true/false&nbsp;selon<br />*/<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">isDivisibleBy25</span><span style="color: #007700">(</span><span style="color: #0000BB">$uValue</span><span style="color: #007700">,</span><span style="color: #0000BB">$sErrorMsg</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(&nbsp;</span><span style="color: #0000BB">$uValue&nbsp;</span><span style="color: #007700">%&nbsp;</span><span style="color: #0000BB">25&nbsp;</span><span style="color: #007700">==</span><span style="color: #0000BB">0</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sErrorMsg</span><span style="color: #007700">=</span><span style="color: #0000BB">$sErrorMsg</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><h2>Utilisez cette methode personnelle lors de la verification</h2>Editez votre fichier model par exemple model_commande.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">getCheck</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_valid</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTab</span><span style="color: #007700">());<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginValid</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isDivisibleBy</span><span style="color: #007700">(</span><span style="color: #DD0000">'volume'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Ce&nbsp;volume&nbsp;n\'est&nbsp;pas&nbsp;divisible&nbsp;par&nbsp;25'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$oPluginValid</span><span style="color: #007700">;<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="formulaireplugin" name="formulaireplugin"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Facilitez la cr&eacute;ation de formulaire</h1><h2>Introduction</h2>Pour vous simplifier l&#039;ecriture de vos fomulaires, vous pouvez utiliser le plugin_html<br /><h2>Creer un menu deroulant</h2>Pour creer un menu deroulant par exemple de pays<br />Vous pouvez utiliser la methode getSelect du plugin_html<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$oPluginHtml</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_html</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tMonth</span><span style="color: #007700">=array(</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #DD0000">'Janvier'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Fevrier'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Mars'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Avril'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Mai'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Juin'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Juillet'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Aout'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Septembre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Octobre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Novembre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Decembre'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$oPluginHtml</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelect</span><span style="color: #007700">(</span><span style="color: #DD0000">'pays'</span><span style="color: #007700">,</span><span style="color: #0000BB">$tMonth</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Ce qui donnera<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">select&nbsp;name</span><span style="color: #007700">=</span><span style="color: #DD0000">"pays"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"0"</span><span style="color: #007700">&gt;&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"1"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Janvier</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"2"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Fevrier</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"3"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Mars</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"4"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Avril</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"5"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Mai</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"6"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Juin</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"7"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Juillet</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"8"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Aout</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"9"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Septembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"10"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Octobre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"11"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Novembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"12"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Decembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br />&lt;/</span><span style="color: #0000BB">select</span><span style="color: #007700">&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Pour preselectionner une valeur, utiliser le 3 eme parametre<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$oPluginHtml</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_html</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tMonth</span><span style="color: #007700">=array(</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #DD0000">'Janvier'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Fevrier'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Mars'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Avril'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Mai'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Juin'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Juillet'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Aout'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Septembre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Octobre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Novembre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Decembre'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$oPluginHtml</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelect</span><span style="color: #007700">(</span><span style="color: #DD0000">'pays'</span><span style="color: #007700">,</span><span style="color: #0000BB">$tMonth</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Ce qui donnera<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">select&nbsp;name</span><span style="color: #007700">=</span><span style="color: #DD0000">"pays"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"0"</span><span style="color: #007700">&gt;&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"1"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Janvier</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"2"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Fevrier</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;select</span><span style="color: #007700">=</span><span style="color: #DD0000">"select"&nbsp;</span><span style="color: #0000BB">value</span><span style="color: #007700">=</span><span style="color: #DD0000">"3"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Mars</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"4"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Avril</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"5"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Mai</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"6"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Juin</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"7"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Juillet</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"8"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Aout</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"9"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Septembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"10"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Octobre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"11"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Novembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"12"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Decembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br />&lt;/</span><span style="color: #0000BB">select</span><span style="color: #007700">&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Pour ajouter une action onchange par exemple<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$oPluginHtml</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_html</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$tMonth</span><span style="color: #007700">=array(</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #DD0000">'Janvier'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Fevrier'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Mars'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Avril'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Mai'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Juin'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Juillet'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Aout'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Septembre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Octobre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Novembre'</span><span style="color: #007700">,</span><span style="color: #DD0000">'Decembre'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$oPluginHtml</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelect</span><span style="color: #007700">(</span><span style="color: #DD0000">'pays'</span><span style="color: #007700">,</span><span style="color: #0000BB">$tMonth</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'onChange'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'goTo(this.value)'</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Ce qui donnera<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">select&nbsp;name</span><span style="color: #007700">=</span><span style="color: #DD0000">"pays"&nbsp;</span><span style="color: #0000BB">onChange</span><span style="color: #007700">=</span><span style="color: #DD0000">"goTo(this.value)"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"0"</span><span style="color: #007700">&gt;&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"1"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Janvier</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"2"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Fevrier</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;select</span><span style="color: #007700">=</span><span style="color: #DD0000">"select"&nbsp;</span><span style="color: #0000BB">value</span><span style="color: #007700">=</span><span style="color: #DD0000">"3"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Mars</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"4"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Avril</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"5"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Mai</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"6"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Juin</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"7"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Juillet</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"8"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Aout</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"9"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Septembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"10"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Octobre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"11"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Novembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">option&nbsp;value</span><span style="color: #007700">=</span><span style="color: #DD0000">"12"</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Decembre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">option</span><span style="color: #007700">&gt;<br />&lt;/</span><span style="color: #0000BB">select</span><span style="color: #007700">&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Plus d&#039;infos ici : <a href="http://mkdevs.com/doxygen/classplugin__html.html">http://mkdevs.com/doxygen/classplugin__html.html </a><br /><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="acl" name="acl"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>G&eacute;rer des permissions (ACL)</h1><h2>Introduction</h2>Si vous avez besoin de g&eacute;rer des droits/permissions sur votre application<br /><h2>Base de donn&eacute;es</h2>Il vous faut au minimum 3 tables : Account, Groupe et Permission<br />Par exemple, ici en se basant sur une base mysql<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">Account</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">login</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">pass</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">groupe_id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br /><br /></span><span style="color: #0000BB">CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">Groupe</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">name</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br /><br /></span><span style="color: #0000BB">CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">Permission</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">action</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">element</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">allowdeny</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">groupe_id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">),<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Un utilisateur appartient &agrave; un groupe, ce groupe poss&egrave;de des permissions de faire certaines actions sur certains &eacute;l&eacute;ments.<br />Passez par le builder pour g&eacute;n&eacute;rer les classes mod&egrave;les de ces tables.<br />model_Account.php<br />model_Groupe.php (cochez cr&eacute;er une methode getSelect() avec id comme cl&eacute; et name comme valeur)<br />et<br />model_Permission.php<br /><br />Puis ajouter dans la classe model_Permission une methode findByGroup pour r&eacute;cup&eacute;rer les permissions de groupe de l&#039;utilisateur<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">findByGroup</span><span style="color: #007700">(</span><span style="color: #0000BB">$group</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sTable</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;groupe_id=?'</span><span style="color: #007700">,(int)</span><span style="color: #0000BB">$group</span><span style="color: #007700">);<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br />Ajoutez dans la classe model_account une methode getListAccount qui permettra de v&eacute;rifier les identifiants &agrave; la connexion.<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">getListAccount</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;$tAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;$tLoginPassAccount</span><span style="color: #007700">=array();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$tAccount&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tLoginPassAccount</span><span style="color: #007700">[</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">login</span><span style="color: #007700">][</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pass</span><span style="color: #007700">]=</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$tLoginPassAccount</span><span style="color: #007700">;<br /><br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Ajoutez enfin une m&eacute;thode pour v&eacute;rifier qu&#039;un compte est unique (n&eacute;cessaire &agrave; l&#039;inscription)<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">isUnique</span><span style="color: #007700">(</span><span style="color: #0000BB">$login</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sTable</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;login=?'</span><span style="color: #007700">,</span><span style="color: #0000BB">$login</span><span style="color: #007700">)&nbsp;){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><h2>Cr&eacute;er des groupes</h2>En base de donn&eacute;e entrez des groupes dans la base de donn&eacute;e, par exemple &quot;1&quot; pour &quot;read&quot;, et &quot;2&quot; pour &quot;read-write&quot;<br /><br /><h2>Param&eacute;trez les permissions</h2>Pensez &agrave; ajouter en base votre param&eacute;trage de permissions: vous pouvez dans un premier temps g&eacute;n&eacute;rer un module CRUD sur votre table permission pour faciliter celui-ci.<br />Pensez &agrave; la g&eacute;n&eacute;ration du module CRUD de s&eacute;lectionnez pour le champ groupe_id &quot;model_Groupe::getSelect()&quot;<br /><br /><h2>Module authentification</h2>Cr&eacute;er via le builder un module &quot;auth&quot; avec trois actions: login,logout et inscription<br />Le builder va cr&eacute;er<br />- un r&eacute;pertoire module/auth,<br />- un fichier module/auth/main.php ,<br />- un sous r&eacute;pertoire module/auth/view<br />- ainsi que 3 fichiers de vue module/auth/view/login.php, logout.php et inscription.php<br /><br /><h3>Page de login</h3>Renseignez le fichier auth/login.php ainsi:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">form&nbsp;action</span><span style="color: #007700">=</span><span style="color: #DD0000">""&nbsp;</span><span style="color: #0000BB">method</span><span style="color: #007700">=</span><span style="color: #DD0000">"POST"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;Nom&nbsp;d</span><span style="color: #DD0000">'utilisateur&nbsp;&lt;input&nbsp;type="text"&nbsp;name="login"&nbsp;/&gt;&lt;br/&gt;<br />&nbsp;&nbsp;&nbsp;Mot&nbsp;de&nbsp;passe&nbsp;&lt;input&nbsp;type="password"&nbsp;name="password"&nbsp;/&gt;&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;value="Se&nbsp;connecter"&nbsp;/&gt;<br /><br />&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;$this-&gt;message?&gt;&lt;/p&gt;<br />&lt;/form&gt;<br /><br />&lt;p&gt;&lt;a&nbsp;href="&lt;?php&nbsp;echo&nbsp;_root::getLink('</span><span style="color: #0000BB">auth</span><span style="color: #007700">::</span><span style="color: #0000BB">inscription</span><span style="color: #DD0000">')?&gt;"&gt;Inscription&lt;/a&gt;&lt;/p&gt;<br /><br />&nbsp;&nbsp;&nbsp;</span><br />
</span><br />
</code></div><h3>Page d&#039;inscription</h3>Renseignez le fichier auth/inscription.php ainsi:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">h1</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Inscription</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">h1</span><span style="color: #007700">&gt;<br />&lt;</span><span style="color: #0000BB">form&nbsp;action</span><span style="color: #007700">=</span><span style="color: #DD0000">""&nbsp;</span><span style="color: #0000BB">method</span><span style="color: #007700">=</span><span style="color: #DD0000">"POST"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">table</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">tr</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">th</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">Nom&nbsp;d</span><span style="color: #DD0000">'utilisateur&lt;/th&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input&nbsp;type="text"&nbsp;name="login"&nbsp;value="&lt;?php&nbsp;echo&nbsp;_root::getParam('</span><span style="color: #0000BB">login</span><span style="color: #DD0000">')?&gt;"&nbsp;/&gt;&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;Mot&nbsp;de&nbsp;passe&lt;/th&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input&nbsp;type="password"&nbsp;name="password"&nbsp;/&gt;&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;Confirmez&nbsp;le&nbsp;mot&nbsp;de&nbsp;passe&lt;/th&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input&nbsp;type="password"&nbsp;name="password2"&nbsp;/&gt;&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&lt;/table&gt;<br />&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type="submit"&nbsp;value="S'</span><span style="color: #0000BB">enregistrer</span><span style="color: #DD0000">"&nbsp;/&gt;<br /><br />&lt;p&gt;&lt;?php&nbsp;echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #DD0000">?&gt;&lt;/p&gt;<br /><br />&lt;p&gt;&lt;a&nbsp;href="</span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getLink</span><span style="color: #007700">(</span><span style="color: #DD0000">'auth::login'</span><span style="color: #007700">)</span><span style="color: #0000BB">?&gt;</span>"&gt;Page&nbsp;de&nbsp;login&lt;/a&gt;&lt;/p&gt;<br /><br />&lt;/form&gt;<br />&nbsp;&nbsp;&nbsp;</span><br />
</code></div><h3>Action login : m&eacute;thode _login du module d&#039;authentification</h3>Editez le fichier module/auth/main.php comme suit:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">module_auth&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">abstract_module</span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">(...)<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_login</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processLogin</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'auth::login'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">=</span><span style="color: #0000BB">$message</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">processLogin</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isPost</span><span style="color: #007700">()){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sLogin</span><span style="color: #007700">=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'login'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sPass</span><span style="color: #007700">=</span><span style="color: #0000BB">sha1</span><span style="color: #007700">(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'password'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">model_Account</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getListAccount</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;verifie&nbsp;que&nbsp;l'utilisateur&nbsp;existe&nbsp;bien<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">checkLoginPass</span><span style="color: #007700">(</span><span style="color: #0000BB">$tAccount</span><span style="color: #007700">,</span><span style="color: #0000BB">$sLogin</span><span style="color: #007700">,</span><span style="color: #0000BB">$sPass</span><span style="color: #007700">)){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getAccount</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//recuperation&nbsp;de&nbsp;la&nbsp;liste&nbsp;de&nbsp;ses&nbsp;permissions<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tPermission</span><span style="color: #007700">=</span><span style="color: #0000BB">model_Permission</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findByGroup</span><span style="color: #007700">(</span><span style="color: #0000BB">$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">groupe_id</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;purge&nbsp;les&nbsp;permissions&nbsp;en&nbsp;session<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getACL</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">purge</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Au&nbsp;moment&nbsp;d'autentifier&nbsp;votre&nbsp;utilisateur,&nbsp;vous&nbsp;allez&nbsp;chercher&nbsp;sa&nbsp;liste&nbsp;de&nbsp;permissions<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//boucle&nbsp;sur&nbsp;les&nbsp;permissions<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$tPermission</span><span style="color: #007700">)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach(</span><span style="color: #0000BB">$tPermission&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$oPermission</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$oPermission</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">allowdeny</span><span style="color: #007700">==</span><span style="color: #DD0000">'ALLOW'</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getACL</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">allow</span><span style="color: #007700">(</span><span style="color: #0000BB">$oPermission</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">action</span><span style="color: #007700">,</span><span style="color: #0000BB">$oPermission</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">element</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}else{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getACL</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">deny</span><span style="color: #007700">(</span><span style="color: #0000BB">$oPermission</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">action</span><span style="color: #007700">,</span><span style="color: #0000BB">$oPermission</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">element</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//redirection&nbsp;vers&nbsp;votre&nbsp;partie&nbsp;privee<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">redirect</span><span style="color: #007700">(</span><span style="color: #DD0000">'default::index'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}else{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #DD0000">'login/mot&nbsp;de&nbsp;passe&nbsp;incorrect'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_inscription</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processInscription</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'auth::inscription'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">=</span><span style="color: #0000BB">$message</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">processInscription</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isPost</span><span style="color: #007700">()){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!</span><span style="color: #0000BB">model_Account</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isUnique</span><span style="color: #007700">(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'login'</span><span style="color: #007700">))){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #DD0000">'Le&nbsp;login&nbsp;existe&nbsp;deja'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}else&nbsp;if(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'password'</span><span style="color: #007700">)!=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'password2'</span><span style="color: #007700">)){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #DD0000">'Les&nbsp;deux&nbsp;mots&nbsp;de&nbsp;passe&nbsp;doivent&nbsp;etre&nbsp;identique'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">row_Account</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">login</span><span style="color: #007700">=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'login'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pass</span><span style="color: #007700">=</span><span style="color: #0000BB">sha1</span><span style="color: #007700">(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'password'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">groupe_id</span><span style="color: #007700">=</span><span style="color: #0000BB">1</span><span style="color: #007700">;</span><span style="color: #FF8000">//a&nbsp;l'inscription&nbsp;on&nbsp;cree&nbsp;des&nbsp;comptes&nbsp;de&nbsp;groupe&nbsp;seulement&nbsp;"read"<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAccount</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">save</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #DD0000">'Votre&nbsp;compte&nbsp;a&nbsp;bien&nbsp;t&nbsp;cr'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_logout</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getAuth</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">logout</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">(...)<br />}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><h2>Remarque</h2>1. Vous pouvez mettre des droits sur ce que vous voulez (un bouton, l&#039;acc&egrave;s &agrave; une page...)<br />2. Vous pouvez facilement g&eacute;rer un model multi groupe en ajoutant une table de liaison entre groupe et account, il faudra simplement changer votre methode findByGroup dans la classe model_Permission<br /><br /><h2>Verification d&#039;un droit</h2>Par exemple on a param&eacute;tr&eacute; comme droit pour le groupe &quot;read-write&quot; la permissions suivante:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />action</span><span style="color: #007700">:</span><span style="color: #0000BB">write<br />element</span><span style="color: #007700">:</span><span style="color: #0000BB">contact<br />allowdeny</span><span style="color: #007700">:</span><span style="color: #0000BB">ALLOW<br />&nbsp;&nbsp;&nbsp;</span><br />
</span><br />
</code></div>Pour verifier que l&#039;utilisateur a le droit d&#039;afficher le bouton d&#039;ajout de contact, on utilise la methode &quot;can&quot; de l&#039;objet ACL<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getACL</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">can</span><span style="color: #007700">(</span><span style="color: #DD0000">'write'</span><span style="color: #007700">,</span><span style="color: #DD0000">'contact'</span><span style="color: #007700">)&nbsp;):</span><span style="color: #0000BB">?&gt;<br /></span>&lt;a&nbsp;href="<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getLink</span><span style="color: #007700">(</span><span style="color: #DD0000">'contact::add'</span><span style="color: #007700">)</span><span style="color: #0000BB">?&gt;</span>"&gt;Ajouter&nbsp;un&nbsp;contact&lt;/a&gt;<br /><span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">endif;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="usecrudembedded" name="usecrudembedded"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Utilisez des CRUD int&eacute;grables</h1><h2>Introduction</h2>Vous souhaitez utiliser un module int&eacute;grable au sein d&#039;un autre module, par exemple on va permettre de saisir des livres &agrave; des auteurs.<br /><br /><h2>Base de donn&eacute;e</h2>On va commencer par cr&eacute;er deux tables: auteur et livre<br /><br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">auteur</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">nom</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">30</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">prenom</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">30</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br /><br /></span><span style="color: #0000BB">CREATE&nbsp;TABLE&nbsp;</span><span style="color: #007700">`</span><span style="color: #DD0000">livre</span><span style="color: #007700">`&nbsp;(<br />`</span><span style="color: #DD0000">id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL&nbsp;auto_increment</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">titre</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">varchar</span><span style="color: #007700">(</span><span style="color: #0000BB">50</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br />`</span><span style="color: #DD0000">auteur_id</span><span style="color: #007700">`&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">(</span><span style="color: #0000BB">11</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">NOT&nbsp;NULL</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">PRIMARY&nbsp;KEY&nbsp;</span><span style="color: #007700">(`</span><span style="color: #DD0000">id</span><span style="color: #007700">`)<br />);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><h2>Couche mod&egrave;le</h2>Via le builder, g&eacute;n&eacute;rez la couche mod&egrave;le en prenant bien soin pour la ligne &quot;auteur&quot;, de cocher la case &quot;Ajouter une m&eacute;thode getSelect()*&quot; et de selectionner &quot;id&quot; comme cl&eacute; et &quot;nom&quot; comme valeur<br />Ajoutez dans la classe model/model_livre.php une methode qui retournera uniquement les livres de l&#039;auteur s&eacute;lectionn&eacute;<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">findAllByAuteur</span><span style="color: #007700">(</span><span style="color: #0000BB">$auteur_id</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">findMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sTable</span><span style="color: #007700">.</span><span style="color: #DD0000">'&nbsp;WHERE&nbsp;auteur_id=?'</span><span style="color: #007700">,</span><span style="color: #0000BB">$auteur_id&nbsp;</span><span style="color: #007700">);<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><h2>Module CRUD auteur</h2>Via le builder, s&eacute;lectionnez &quot;Cr&eacute;er un module CRUD&quot;, cliquez sur &quot;model_auteur&quot; puis pressez le bouton &quot;cr&eacute;er&quot;<br /><br /><h2>Module CRUD int&eacute;grable livre</h2>Dans le builder, cliquez sur &quot;Cr&eacute;er un module CRUD int&eacute;grable [beta]&quot;,<br />s&eacute;lectionnez &quot;model_livre&quot;,<br />indiquez pour le champ &quot;auteur_id&quot; via le menu d&eacute;roulant &quot;Select en utilisant model_auteur::getSelect()&quot;<br />puis pressez le bouton &quot;cr&eacute;er&quot;<br /><h3>Modifions sa m&eacute;thode de liste afin qu&#039;elle liste uniquement les livres de l&#039;auteur s&eacute;lectionn&eacute;</h3>Editez la methode _list() du fichier module/livre/main.php<br />Remplacez<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$tLivre</span><span style="color: #007700">=</span><span style="color: #0000BB">model_livre</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findAll</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>par<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />$tLivre</span><span style="color: #007700">=</span><span style="color: #0000BB">model_livre</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findAllByAuteur</span><span style="color: #007700">(</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><h3>Forcons le livre ajout&eacute; pour qu&#039;il appartienne &agrave; l&#039;auteur s&eacute;lectionn&eacute; lors d&#039;un ajout</h3>Editez la methode _save() du fichier module/livre/main.php<br />On va y ajoutez le fait de forcer l&#039;auteur dans le cas d&#039;une cr&eacute;ation<br />Remplacez<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$iId</span><span style="color: #007700">==</span><span style="color: #0000BB">null</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oLivre</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">row_livre</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">}else{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oLivre</span><span style="color: #007700">=</span><span style="color: #0000BB">model_livre</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findById</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">module_livre</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">,</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;);<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>par<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$iId</span><span style="color: #007700">==</span><span style="color: #0000BB">null</span><span style="color: #007700">){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oLivre</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">row_livre</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;$oLivre</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">auteur_id</span><span style="color: #007700">=</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">);<br />}else{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oLivre</span><span style="color: #007700">=</span><span style="color: #0000BB">model_livre</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findById</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">module_livre</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">,</span><span style="color: #0000BB">null</span><span style="color: #007700">)&nbsp;);<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br />On va &eacute;galement supprimer le champ auteur_id du formulaire d&#039;ajout, en editant le fichier module/livre/view/new.php<br />Remplacez<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">table&nbsp;</span><span style="color: #007700">class=</span><span style="color: #DD0000">"tb_new"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">tr</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">th</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">titre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">th</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">td</span><span style="color: #007700">&gt;&lt;</span><span style="color: #0000BB">input&nbsp;name</span><span style="color: #007700">=</span><span style="color: #DD0000">"titre"&nbsp;</span><span style="color: #007700">/&gt;&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage&nbsp;</span><span style="color: #007700">and&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'titre'</span><span style="color: #007700">])):&nbsp;echo&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'titre'</span><span style="color: #007700">]);&nbsp;endif;</span><span style="color: #0000BB">?&gt;</span>&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br /><br />&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;th&gt;auteur_id&lt;/th&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$oPluginHtml</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSelect</span><span style="color: #007700">(</span><span style="color: #DD0000">'auteur_id'</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tJoinmodel_auteur</span><span style="color: #007700">)</span><span style="color: #0000BB">?&gt;&lt;?php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage&nbsp;</span><span style="color: #007700">and&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'auteur_id'</span><span style="color: #007700">])):&nbsp;echo&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'auteur_id'</span><span style="color: #007700">]);&nbsp;endif;</span><span style="color: #0000BB">?&gt;</span>&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br /><br />&lt;/table&gt;<br />&nbsp;&nbsp;&nbsp;</span><br />
</code></div>par<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">table&nbsp;</span><span style="color: #007700">class=</span><span style="color: #DD0000">"tb_new"</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">tr</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">th</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">titre</span><span style="color: #007700">&lt;/</span><span style="color: #0000BB">th</span><span style="color: #007700">&gt;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">td</span><span style="color: #007700">&gt;&lt;</span><span style="color: #0000BB">input&nbsp;name</span><span style="color: #007700">=</span><span style="color: #DD0000">"titre"&nbsp;</span><span style="color: #007700">/&gt;&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage&nbsp;</span><span style="color: #007700">and&nbsp;isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'titre'</span><span style="color: #007700">])):&nbsp;echo&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">','</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">tMessage</span><span style="color: #007700">[</span><span style="color: #DD0000">'titre'</span><span style="color: #007700">]);&nbsp;endif;</span><span style="color: #0000BB">?&gt;</span>&lt;/td&gt;<br />&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br /><br />&lt;/table&gt;<br />&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br /><br /><br /><h2>Ajoutons le module int&eacute;grable &quot;livre&quot; dans la methode &quot;_show()&quot; du module auteur</h2>Copiez le code g&eacute;n&eacute;r&eacute; en ajoutant une precision sur le module parent avec la m&eacute;thode &quot;setRootLink&quot;<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #FF8000">//instancier&nbsp;le&nbsp;module<br /></span><span style="color: #0000BB">$oModuleLivre</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">module_livre</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">//recupere&nbsp;la&nbsp;vue&nbsp;du&nbsp;module<br /></span><span style="color: #0000BB">$oView</span><span style="color: #007700">=</span><span style="color: #0000BB">$oModuleLivre</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_index</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//assigner&nbsp;la&nbsp;vue&nbsp;retournee&nbsp;a&nbsp;votre&nbsp;layout<br /></span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Dans module/auteur/main.php methode _show()<br /><br />Ce qui donnera:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_show</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oAuteur</span><span style="color: #007700">=</span><span style="color: #0000BB">model_auteur</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">findById</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">)&nbsp;);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'auteur::show'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oAuteur</span><span style="color: #007700">=</span><span style="color: #0000BB">$oAuteur</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//instancier&nbsp;le&nbsp;module<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oModuleLivre</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">module_livre</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;indique&nbsp;au&nbsp;module&nbsp;integrable&nbsp;les&nbsp;elements&nbsp;du&nbsp;module&nbsp;parent<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oModuleLivre</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setRootLink</span><span style="color: #007700">(</span><span style="color: #DD0000">'auteur::show'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//recupere&nbsp;la&nbsp;vue&nbsp;du&nbsp;module<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=</span><span style="color: #0000BB">$oModuleLivre</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_index</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//assigner&nbsp;la&nbsp;vue&nbsp;retournee&nbsp;a&nbsp;votre&nbsp;layout<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>On indique ici en premier argument le couple module/action ainsi que les parametres &agrave; prendre en compte, ceci afin que les liens du module int&eacute;gr&eacute; inclut a chaque fois les informations de la page courante<br /><br /><h2>Conclusion</h2>Ainsi, on va pouvoir ajouter des auteurs, et leur ajouter des livres facilement<br /><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="zf1" name="zf1"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Utiliser des classes Zend Framework 1</h1><h2>Introduction</h2>Si vous avez besoin d&#039;utiliser une classe Zend Framework 1, il vous suffit de faire la chose suivante.<br /><br /><h2>Utilisation</h2>Il vous suffit d&#039;ajouter le code suivant dans votre fichier index.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #FF8000">/*&nbsp;decommenter&nbsp;pour&nbsp;utiliser&nbsp;zendframework&nbsp;a&nbsp;partir&nbsp;de&nbsp;la&nbsp;1.12*/<br /></span><span style="color: #0000BB">set_include_path</span><span style="color: #007700">(</span><span style="color: #0000BB">get_include_path</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #0000BB">PATH_SEPARATOR&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">'/chemin/vers/ZendFramework-1.12.0/library/'</span><span style="color: #007700">);<br /><br />require_once&nbsp;</span><span style="color: #DD0000">'Zend/Loader/Autoloader.php'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$autoloader&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Zend_Loader_Autoloader</span><span style="color: #007700">::</span><span style="color: #0000BB">getInstance</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$autoloader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setFallbackAutoloader</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br />Ensuite il vous suffira naturellement d&#039;instancier les classes n&eacute;cessaires, par exemple<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br />$oZendDate</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">Zend_Date</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$oZendDate</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">Zend_Date</span><span style="color: #007700">::</span><span style="color: #0000BB">HOUR</span><span style="color: #007700">);<br /><br />print&nbsp;</span><span style="color: #0000BB">$oZendDate</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">toString</span><span style="color: #007700">(</span><span style="color: #DD0000">'d&nbsp;MMM&nbsp;Y'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><p><a id="zf2" name="zf2"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Utiliser des classes Zend Framework 2</h1><h2>Introduction</h2>Si vous avez besoin d&#039;utiliser une classe Zend Framework 2, il vous suffit de faire la chose suivante.<br /><br /><h2>Utilisation</h2>Il vous suffit d&#039;ajouter le code suivant dans votre fichier index.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #FF8000">/*&nbsp;decommenter&nbsp;pour&nbsp;utiliser&nbsp;zendframework&nbsp;a&nbsp;partir&nbsp;de&nbsp;la&nbsp;1.12*/<br /></span><span style="color: #0000BB">set_include_path</span><span style="color: #007700">(</span><span style="color: #0000BB">get_include_path</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #0000BB">PATH_SEPARATOR&nbsp;</span><span style="color: #007700">.</span><span style="color: #DD0000">'/chemin/vers/ZendFramework-2.1.5/library/'</span><span style="color: #007700">);<br /><br />require_once&nbsp;</span><span style="color: #DD0000">'Zend/Loader/StandardAutoloader.php'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$loader&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Zend</span><span style="color: #007700">\</span><span style="color: #0000BB">Loader</span><span style="color: #007700">\</span><span style="color: #0000BB">StandardAutoloader</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$loader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">registerNamespace</span><span style="color: #007700">(</span><span style="color: #DD0000">'Zend'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Zend/'</span><span style="color: #007700">)<br />-&gt;</span><span style="color: #0000BB">setFallbackAutoloader</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$loader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">register</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>Apr&egrave;s la ligne &quot;spl_autoload_register(array(&#039;_root&#039;,&#039;autoload&#039;));&quot;<br /><br />Ensuite il vous suffira naturellement d&#039;instancier les classes n&eacute;cessaires, par exemple<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br />$oZendDate</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">Zend</span><span style="color: #007700">\</span><span style="color: #0000BB">Stdlib</span><span style="color: #007700">\</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">();<br /><br />print&nbsp;</span><span style="color: #0000BB">$oZendDate</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'d&nbsp;M&nbsp;Y'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Go top</a></p><br /><br /><br /><p><a id="zf3" name="zf3"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Utiliser des classes Zend Framework 3</h1><h2>Introduction</h2>Si vous avez besoin d&#039;utiliser une classe Zend Framework 3, il vous suffit de faire la chose suivante.<br /><br /><h2>Utilisation</h2>Il vous suffit de faire 2 choses:<br />1. installez Zend Framework 3 en utilisant composer<br />Pour cela, cr&eacute;ez un fichier &quot;composer.json&quot; &agrave; la racine de votre projet mkf<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"votreProjet"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"description"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"votre&nbsp;projet"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"type"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"project"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"prefer-stable"</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"require"</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"php"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"^5.6&nbsp;||&nbsp;^7.0"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"zendframework/zend-component-installer"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"^1.0&nbsp;||&nbsp;^0.7&nbsp;||&nbsp;^1.0.0-dev@dev"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"zendframework/zend-mvc"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"^3.0.1"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"zfcampus/zf-development-mode"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"^3.0"<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>2. lancer l&#039;installation composer (<a href="https://getcomposer.org/">plus d&#039;infos sur composer </a>)<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />composer&nbsp;install<br />&nbsp;&nbsp;&nbsp;</span><br />
</span><br />
</code></div><br />Ensuite il faut ajouter le code suivant au d&eacute;but de votre fichier index.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">include&nbsp;</span><span style="color: #0000BB">__DIR__&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'/../vendor/autoload.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><br />Enfin il vous suffira naturellement d&#039;instancier les classes n&eacute;cessaires, par exemple dans votre module ou ailleurs:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br />$validator&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Zend</span><span style="color: #007700">\</span><span style="color: #0000BB">Validator</span><span style="color: #007700">\</span><span style="color: #0000BB">EmailAddress</span><span style="color: #007700">();<br /><br />if&nbsp;(</span><span style="color: #0000BB">$validator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isValid</span><span style="color: #007700">(</span><span style="color: #0000BB">$email</span><span style="color: #007700">))&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">print&nbsp;</span><span style="color: #DD0000">"email&nbsp;ok"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$validator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessages</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$messageId&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$message</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Validation&nbsp;en&nbsp;erreur&nbsp;'%s':&nbsp;%s\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$messageId</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$message</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Retour en haut de la page</a></p><br /><br /><br /><p><a id="sf4" name="sf4"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Utiliser des classes Symfony 4</h1><h2>Introduction</h2>Si vous avez besoin d&#039;utiliser une classe Symfony 4, il vous suffit de faire la chose suivante.<br /><br /><h2>Utilisation</h2>Il vous suffit de faire 2 choses:<br />1. installez Symfony 4 en utilisant composer<br />Pour cela, cr&eacute;ez un fichier &quot;composer.json&quot; &agrave; la racine de votre projet mkf<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"name"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"votreProjet"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"description"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"votre&nbsp;projet"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"type"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"project"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"prefer-stable"</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"require"</span><span style="color: #007700">:&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"php"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"^5.6&nbsp;||&nbsp;^7.0"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"symfony/framework-bundle"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"^4.2"</span><span style="color: #007700">,<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"symfony/validator"</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">"^4.2"<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>2. lancer l&#039;installation composer (<a href="https://getcomposer.org/">plus d&#039;infos sur composer </a>)<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br />composer&nbsp;install<br />&nbsp;&nbsp;&nbsp;</span><br />
</span><br />
</code></div><br />Ensuite il faut ajouter le code suivant au d&eacute;but de votre fichier index.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">include&nbsp;</span><span style="color: #0000BB">__DIR__&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'/../vendor/autoload.php'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><br />Enfin il vous suffira naturellement d&#039;instancier les classes n&eacute;cessaires, par exemple dans votre module ou ailleurs:<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;?</span><span style="color: #0000BB">php<br />$myString</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$validator&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">Symfony</span><span style="color: #007700">\</span><span style="color: #0000BB">Component</span><span style="color: #007700">\</span><span style="color: #0000BB">Validator</span><span style="color: #007700">\</span><span style="color: #0000BB">Validation</span><span style="color: #007700">::</span><span style="color: #0000BB">createValidator</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$violations&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$validator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">(</span><span style="color: #0000BB">$myString</span><span style="color: #007700">,&nbsp;[<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">new&nbsp;\</span><span style="color: #0000BB">Symfony</span><span style="color: #007700">\</span><span style="color: #0000BB">Component</span><span style="color: #007700">\</span><span style="color: #0000BB">Validator</span><span style="color: #007700">\</span><span style="color: #0000BB">Constraints</span><span style="color: #007700">\</span><span style="color: #0000BB">NotBlank</span><span style="color: #007700">(),<br />]);<br /><br />if&nbsp;(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$violations</span><span style="color: #007700">))&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$violations&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$violation</span><span style="color: #007700">)&nbsp;{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$violation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">().</span><span style="color: #DD0000">'&lt;br&gt;'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}else{<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">print&nbsp;</span><span style="color: #DD0000">"myString&nbsp;notBlank"</span><span style="color: #007700">;<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><p><a href="#">Retour en haut de la page</a></p><br /><br /><br /><p><a id="token" name="token"></a></p><p style="margin:40px 10px">&nbsp;</p><br /><h1>Utiliser les jetons pour &eacute;viter les failles XSRF</h1><h2>Introduction</h2>Pour se pr&eacute;munir des failles XSRF, on passe par l&#039;utilisation des jetons: lors de la cr&eacute;ation du formualire, on cr&eacute;&eacute; un jeton, et lorsque celui-ci est envoy&eacute; on v&eacute;rifie que le jeton est le m&ecirc;me.<br />Celui-ci doit donc &ecirc;tre unique ;) Plus d&#039;informations sur le XSRF ici: http://fr.wikipedia.org/wiki/Cross-site_request_forgery<br /><br /><h2>Phase 1: Cot&eacute; controlleur</h2>Lors de la cr&eacute;ation de la vue contenant le formulaire, on cr&eacute;&eacute; un jeton avec le plugin plugin_xsrf<br />On passe celui-ci &agrave; notre vue<br />Fichier module/article/main.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">_new</span><span style="color: #007700">(){<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;cr&nbsp;une&nbsp;vue<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'article::new'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;instancie&nbsp;un&nbsp;jeton<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginXsrf</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_xsrf</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;assigne&nbsp;ce&nbsp;jeton&nbsp;&nbsp;la&nbsp;vue<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">token</span><span style="color: #007700">=</span><span style="color: #0000BB">$oPluginXsrf</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getToken</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;assigne&nbsp;le&nbsp;tableau&nbsp;de&nbsp;message&nbsp;&nbsp;la&nbsp;vue<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messageToken</span><span style="color: #007700">=</span><span style="color: #0000BB">$messageToken</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;ajoute&nbsp;la&nbsp;vue&nbsp;au&nbsp;layout<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div><br /><h2>Phase 2: cot&eacute; vue</h2>On ajoute un champ cach&eacute; contenant ce jeton, on affichera &eacute;galement les messages du jeton si celui-ci est &eacute;rron&eacute;<br />Fichier module/article/view/new.php<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">&lt;</span><span style="color: #0000BB">input&nbsp;type</span><span style="color: #007700">=</span><span style="color: #DD0000">"hidden"&nbsp;</span><span style="color: #0000BB">name</span><span style="color: #007700">=</span><span style="color: #DD0000">"token"&nbsp;</span><span style="color: #0000BB">value</span><span style="color: #007700">=</span><span style="color: #DD0000">"&lt;?php&nbsp;echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">token</span><span style="color: #DD0000">?&gt;"&nbsp;</span><span style="color: #007700">/&gt;<br />&lt;?</span><span style="color: #0000BB">php&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messageToken&nbsp;</span><span style="color: #007700">and&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messageToken</span><span style="color: #007700">!=</span><span style="color: #DD0000">''</span><span style="color: #007700">):&nbsp;echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messageToken</span><span style="color: #007700">;&nbsp;endif;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;</span><br />
</code></div><br /><h2>Phase 3: cot&eacute; traitement du formulaire</h2>Lors de l&#039;envoi du jeton, on v&eacute;rifie que celui-ci est correcte, et on renvoie le message d&#039;erreur $messageToken (ensuite assign&eacute; &agrave; la vue)<br /><div class="code"> <code><span style="color: #000000"><br />
<span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">private&nbsp;function&nbsp;</span><span style="color: #0000BB">process</span><span style="color: #007700">(){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;$messageToken</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//traitement&nbsp;du&nbsp;formulaire<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getRequest</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">isPost</span><span style="color: #007700">()){<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//si&nbsp;aucun&nbsp;formulaire&nbsp;envoye&nbsp;on&nbsp;renvoi&nbsp;null<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginXsrf</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_xsrf</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(!</span><span style="color: #0000BB">$oPluginXsrf</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">checkToken</span><span style="color: #007700">(&nbsp;</span><span style="color: #0000BB">_root</span><span style="color: #007700">::</span><span style="color: #0000BB">getParam</span><span style="color: #007700">(</span><span style="color: #DD0000">'token'</span><span style="color: #007700">)&nbsp;)&nbsp;){&nbsp;</span><span style="color: #FF8000">//on&nbsp;verifie&nbsp;que&nbsp;le&nbsp;token&nbsp;est&nbsp;valide<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//si&nbsp;il&nbsp;est&nbsp;invalide,&nbsp;on&nbsp;renvoie&nbsp;le&nbsp;message&nbsp;d'erreur<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$messageToken</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$oPluginXsrf</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;</span><span style="color: #0000BB">$messageToken</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">(...)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//traitement&nbsp;normal&nbsp;du&nbsp;formulaire&nbsp;(enregistrement&nbsp;en&nbsp;base...)<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br /></span><span style="color: #007700">}<br /><br />public&nbsp;function&nbsp;</span><span style="color: #0000BB">_new</span><span style="color: #007700">(){<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//appel&nbsp;&nbsp;la&nbsp;mthode&nbsp;de&nbsp;traitement&nbsp;du&nbsp;formulaire,&nbsp;et&nbsp;rcupration&nbsp;du&nbsp;message&nbsp;de&nbsp;token<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$messageToken</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">process</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;cr&nbsp;une&nbsp;vue<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">_view</span><span style="color: #007700">(</span><span style="color: #DD0000">'article::new'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;instancie&nbsp;un&nbsp;jeton<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oPluginXsrf</span><span style="color: #007700">=new&nbsp;</span><span style="color: #0000BB">plugin_xsrf</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;assigne&nbsp;ce&nbsp;jeton&nbsp;&nbsp;la&nbsp;vue<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">token</span><span style="color: #007700">=</span><span style="color: #0000BB">$oPluginXsrf</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getToken</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;assigne&nbsp;le&nbsp;tableau&nbsp;de&nbsp;message&nbsp;&nbsp;la&nbsp;vue<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$oView</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messageToken</span><span style="color: #007700">=</span><span style="color: #0000BB">$messageToken</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//on&nbsp;ajoute&nbsp;la&nbsp;vue&nbsp;au&nbsp;layout<br /></span><span style="color: #0000BB">&nbsp;&nbsp;&nbsp;$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">oLayout</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'main'</span><span style="color: #007700">,</span><span style="color: #0000BB">$oView</span><span style="color: #007700">);<br />}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000B"></span><br />
</span><br />
</code></div>	 
		</div>	
	 
		</main>
	 
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="site/js/jquery-3.2.1.slim.min.js" ></script>
     <script src="site/js/bootstrap.min.js" ></script>
  </body>
</html>

<!--cache -->